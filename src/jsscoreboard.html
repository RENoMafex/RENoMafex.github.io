<!DOCTYPE html>

<html>
	<head>
		<title>Scoreboard - Malte Schilling</title>
		#include "header.html"
		<style>
			table tr td {
				padding-right: 2em;
				text-align: center;
			}
		</style>
	</head>

	<body>
		#include "navbar.html"

		<h1>Scoreboard for 2 players</h1>
		<noscript><h6>Note: This only works with JS activated!</h6></noscript>

		<table>
			<tr>
				<td><h3>Player 1</h3></td>
				<td><h3>Player 2</h3></td>
			</tr>
			<tr>
				<td>Points:</td>
				<td>Points:</td>
			</tr>
			<tr>
				<td><span id="pointsp1"></span></td>
				<td><span id="pointsp2"></span></td>
			</tr>
			<tr>
				<td>Points to add:</td>
				<td>Points to add:</td>
			</tr>
			<tr>
				<td><input type="text" id="pta1" value=""><input type="button" value="x1" id="x1p1"><input type="button" value="x2" id="x2p1"><input type="button" value="x3" id="x3p1"></td>
				<td><input type="text" id="pta2" value=""><input type="button" value="x1" id="x1p2"><input type="button" value="x2" id="x2p2"><input type="button" value="x3" id="x3p2"></td>
			</tr>
		</table>

		<script>
			let points = {
				1: 0,
				2: 0
			}

			function setupEventListener() {
				document.getElementById("x1p1").addEventListener("click", () => recalc(1, 1));
				document.getElementById("x1p2").addEventListener("click", () => recalc(2, 1));
				document.getElementById("x2p1").addEventListener("click", () => recalc(1, 2));
				document.getElementById("x2p2").addEventListener("click", () => recalc(2, 2));
				document.getElementById("x3p1").addEventListener("click", () => recalc(1, 3));
				document.getElementById("x3p2").addEventListener("click", () => recalc(2, 3));

				document.getElementById("pointsp1").textContent = points[1].toString();
				document.getElementById("pointsp2").textContent = points[2].toString();
			}

			function recalc(player, times) {
				const input = document.getElementById("pta" + player);
				const output = document.getElementById("pointsp" + player);
				for (i = 0; i < times; i++) {
					points[player] += wordToPoints(input.value);
				}
				output.textContent = points[player].toString();
				input.value = "";
			}

			function wordToPoints(string) {
				let int = 0;
				string = string.toUpperCase();
				if (!isNaN(parseInt(string))) {
					int = parseInt(string);
				} else {
					for (let i = 0; i < string.length; i++) {
						let c = string[i];
						if (c == 'E' || c == 'N' || c == 'S' || c == 'I' || c == 'R' || c == 'T' || c == 'U' || c == 'A' || c == 'D') {
							int += 1;
						} else if (c == 'H' || c == 'G' || c == 'L' || c == 'O') {
							int += 2;
						} else if (c == 'M' || c == 'B' || c == 'W' || c == 'Z') {
							int += 3;
						} else if (c == 'C' || c == 'F' || c == 'K' || c == 'P') {
							int += 4;
						} else if (c == 'Ä' || c == 'J' || c == 'Ü' || c == 'V') {
							int += 6;
						} else if (c == 'Ö' || c == 'X') {
							int += 8;
						} else if (c == 'Q' || c == 'Y') {
							int += 10;
						} else {
							continue;
						}
					}
				}

				return int;
			}

			document.addEventListener("DOMContentLoaded", setupEventListener);

		</script>

		#include "back_footer.html"
	</body>
</html>